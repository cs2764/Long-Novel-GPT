# Long-Novel-GPT 启动器使用说明

## 概述

Long-Novel-GPT 项目现在提供了多种启动方式，包括改进的启动器和自动浏览器打开功能。

## 启动方式

### 1. 一键启动器 (推荐)

使用新的 `launcher.py` 一键启动所有服务：

```bash
python launcher.py
```

**功能特点：**
- ✅ 自动检查依赖和环境
- ✅ 自动寻找可用端口
- ✅ 同时启动前端和后端服务
- ✅ 自动打开浏览器
- ✅ 优雅的关闭处理
- ✅ 跨平台兼容

### 2. 前端开发服务器

仅启动前端服务器（需要手动启动后端）：

```bash
python frontend_server.py
```

**功能特点：**
- ✅ 自动检查后端服务状态
- ✅ 自动寻找可用端口
- ✅ 自动打开浏览器
- ✅ API代理到后端
- ✅ 支持局域网访问

### 3. 本地开发启动脚本

使用改进的本地开发脚本：

```bash
python start_local.py
```

**功能特点：**
- ✅ 环境检查
- ✅ 自动端口分配
- ✅ 自动打开浏览器
- ✅ 进程管理

## 浏览器自动打开功能

所有启动方式都支持自动打开浏览器：

- **延迟时间：** 2-3秒（等待服务启动）
- **失败处理：** 如果自动打开失败，会显示手动访问地址
- **多平台支持：** Windows、macOS、Linux

## 端口配置

### 默认端口

- **前端端口：** 8099
- **后端端口：** 7869

### 环境变量配置

可以通过环境变量自定义端口：

```bash
# 设置前端端口
export FRONTEND_PORT=8100

# 设置后端端口
export BACKEND_PORT=7870

# 设置后端主机
export BACKEND_HOST=127.0.0.1
```

### 自动端口分配

如果指定的端口被占用，启动器会自动寻找可用端口：

```
⚠️  端口 8099 已被占用，自动寻找可用端口...
✅ 前端服务器已启动在端口 8100
```

## 访问地址

启动成功后，会显示以下访问地址：

```
📡 前端端口: 8099
🌐 访问地址: http://localhost:8099
🌍 局域网访问: http://192.168.1.100:8099
🔗 后端API地址: http://127.0.0.1:7869
```

## 服务状态检查

启动器会自动检查：

- ✅ Python版本（需要3.8+）
- ✅ 必要依赖模块
- ✅ 端口可用性
- ✅ 后端服务状态

## 错误处理

### 常见问题

1. **端口被占用**
   ```
   ⚠️  端口 8099 已被占用，自动寻找可用端口...
   ```
   解决方案：启动器会自动选择其他可用端口

2. **依赖模块缺失**
   ```
   ❌ 缺少依赖模块: flask, flask_cors
   请运行: pip install -r requirements.txt
   ```
   解决方案：安装缺失的依赖

3. **后端服务未启动**
   ```
   ⚠️  警告: 后端服务未启动，请先启动后端服务
   启动命令: python backend/app.py
   ```
   解决方案：使用一键启动器或手动启动后端

## 停止服务

### 优雅停止

按 `Ctrl+C` 停止服务：

```
🛑 收到停止信号，正在关闭服务...
🧹 清理进程...
✅ 前端服务已停止
✅ 后端服务已停止
✅ 所有服务已停止
```

### 强制停止

如果服务无法正常停止，启动器会自动强制关闭：

```
⚠️  强制停止前端服务
⚠️  强制停止后端服务
```

## 日志输出

启动器提供详细的日志输出：

```
🔍 检查系统依赖...
✅ Python版本: 3.9.7
✅ 所有依赖模块已安装
🚀 启动后端服务 (端口: 7869)
⏳ 等待后端服务启动...
✅ 后端服务已启动在端口 7869
🌐 启动前端服务 (端口: 8099)
🔄 准备打开浏览器...
✅ 浏览器已自动打开: http://localhost:8099
```

## 配置文件

启动器会读取 `.env` 文件中的配置：

```env
# 前端服务端口
FRONTEND_PORT=8099
# 后端服务端口
BACKEND_PORT=7869
# 后端服务监听地址
BACKEND_HOST=127.0.0.1
```

## 开发建议

### 前端开发

如果只需要前端开发，可以单独启动前端服务器：

```bash
python frontend_server.py
```

### 后端开发

如果只需要后端开发，可以单独启动后端服务：

```bash
cd backend
python app.py
```

### 完整开发

使用一键启动器进行完整的开发和测试：

```bash
python launcher.py
```

## 故障排除

### 检查端口占用

```bash
# Windows
netstat -ano | findstr :8099

# macOS/Linux
lsof -i :8099
```

### 检查Python版本

```bash
python --version
```

### 检查依赖安装

```bash
pip list | grep flask
pip list | grep requests
```

### 手动启动测试

如果启动器有问题，可以手动启动服务进行测试：

```bash
# 启动后端
cd backend && python app.py

# 启动前端（新终端）
python frontend_server.py
```